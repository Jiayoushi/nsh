# Test basic command
who -b -q | wc -w

# Test shell scripting
echo echo Hello > input
nsh input
rm input

# Test cd
pwd
mkdir test_dir
cd test_dir
pwd
cd ..
rm -rf test_dir

# Test I/O redirection
echo abcdefg > input
echo result: > result
cat < input | grep a | wc -w >> result
cat result
rm input result

# Test multiple pipes
who | sort -nr | uniq -c | wc -w > out
cat out
rm out

# Test background execution
echo sleep 1 second in the foreground
sleep 1 
echo sleep 1 second in the background
sleep 1 &
echo execute commands in the background
who -b -q | wc -w &

# Test comments
echo abcdefg #comments


# Test no space between meta-characters
echo abcdefg>input
cat<input|grep a|wc -w>out
cat out
rm out

# Test shell escape character
echo \|\<\>\'\|\&\#\\

# Test single quote
echo 'abcdefg|grep -a|wc -w'
echo a'b'c'd'e'f'g
echo abcd > 'file 1'
cat 'file 1'
rm 'file 1'

# Test exit command
echo exit 0 | nsh
echo $?
echo exit 1 | nsh
echo $?
echo exit 127 | nsh
echo $?
echo 'echo abcd | grep x >/dev/null' > input
echo 'exit' >> input
nsh input
echo $?
rm input
